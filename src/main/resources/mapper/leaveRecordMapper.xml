<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaogangkui.dao.LeaveDao">
    <insert id="create" parameterType="LeaveRecord" useGeneratedKeys="true" keyProperty="id">
    	INSERT INTO t_leave_record(applyerId,applyerName,type,startTime,endTime ,remark ,verifyInfo,isDeleted ,createTime,status,customerId )
		VALUES(#{applyerId},#{applyerName},#{type},#{startTime},#{endTime},#{remark} ,#{verifyInfo},#{isDeleted} ,#{createTime},#{status},#{customerId} )
    </insert>
    <select id="fuzzySearch" parameterType="map" resultType="LeaveRecord">
        select * from t_leave_record
        where 0=0
        <if test="applyerId != 0">
            and applyerId = #{applyerId}
        </if>
        <if test="leaveStatus != null and leaveStatus!=3">
            and status =#{leaveStatus}
        </if>
        <if test="leaveStatus == 3">
            and status in (1,2)
        </if>
        <if test="customerId != 0">
            and customerId = #{customerId}
        </if>
    </select>
    <update id="upadteStatus" parameterType="map">
       update t_leave_record set status = #{status} where id = #{id}
    </update>

    <select id="findById" parameterType="map" resultType="LeaveRecord">
        SELECT * from t_leave_record where id = #{id}
    </select>
</mapper>